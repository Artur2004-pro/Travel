openapi: 3.0.0
info:
  title: Bardiner Travel API
  version: 1.0.0
  description: >
    RESTful API for Bardiner Travel platform.  
    This documentation helps frontend developers understand the request/response structure.

servers:
  - url: http://localhost:5000
    description: Local development server

tags:
  - name: Auth
  - name: Email
  - name: Account
  - name: Admin
  - name: Country
  - name: City
  - name: Post
  - name: Comment

paths:
  /auth/signup:
    post:
      tags: [Auth]
      summary: Register new user and send verification email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: johndoe
                email:
                  type: string
                  example: johndoe@gmail.com
                password:
                  type: string
                  example: mysecret
      responses:
        201:
          description: Verification email sent
        400:
          description: Invalid fields

  /auth/login:
    post:
      tags: [Auth]
      summary: Login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: johndoe
                password:
                  type: string
                  example: mysecret
      responses:
        200:
          description: Login successful (returns Bearer token)
        404:
          description: Invalid username or password
        409:
          description: Email not verified

  /auth/resend-verification:
    post:
      tags: [Auth]
      summary: Resend email verification link
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        200:
          description: Verification email sent again

  /email/verify-email:
    get:
      tags: [Email]
      summary: Verify email using token
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
      responses:
        200:
          description: Email verified successfully

  /email/forgot-password:
    get:
      tags: [Email]
      summary: Verify forgot-password token and return JWT
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
      responses:
        200:
          description: JWT token returned for password reset

  /account:
    get:
      tags: [Account]
      summary: Get logged-in user's account info
      security:
        - bearerAuth: []
      responses:
        200:
          description: Returns user info

  /account/update-password:
    post:
      tags: [Account]
      summary: Change password
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                oldPassword:
                  type: string
                newPassword:
                  type: string
      responses:
        200:
          description: Password updated

  /country:
    post:
      tags: [Country]
      summary: Add new country (Admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                country:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        201:
          description: Country created successfully

  /city:
    post:
      tags: [City]
      summary: Add new city (Admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                countryName:
                  type: string
                city:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        201:
          description: City created successfully

  /posts/{id}:
    post:
      tags: [Post]
      summary: Create post for specific city
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: City ID
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                content:
                  type: string
                post:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        201:
          description: Post created successfully

  /comment:
    post:
      tags: [Comment]
      summary: Add comment to post
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  example: 64f0b...
                content:
                  type: string
                  example: Great photo!
      responses:
        200:
          description: Comment added

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
